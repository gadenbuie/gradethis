<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Signal a failing grade if mistakes are detected in the submitted code — fail_if_code_feedback • gradethis</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>

<!-- Bootstrap -->
<link href="../tidyverse.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>
<link href="../tidyverse-2.css" rel="stylesheet">
<link href="../rmd.css" rel="stylesheet">



<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>



<meta property="og:title" content="Signal a failing grade if mistakes are detected in the submitted code — fail_if_code_feedback" />
<meta property="og:description" content="fail_if_code_feedback() uses code_feedback() to detect if there are
differences between the user's submitted code and the solution code (if
available). If the exercise does not have an associated solution, or if there
are no detected differences between the user's and the solution code, no
grade is returned.
See graded() for more information on gradethis grade-signaling
functions." />
<meta property="og:image" content="https://github.com/rstudio/hex-stickers/raw/master/thumbs/RStudio.png" />
<meta property="og:image:alt" content="gradethis package" />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script>

<!-- javascript assets for rmarkdown -->
<script src="../ace-1.2.3/ace.js" type="text/javascript" charset="utf-8"></script>
<script src="../holder-2.9.0/holder.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../snippets/snippets.js" type="text/javascript" charset="utf-8"></script>

  

  

  </head>

  <body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gradethis</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="auto">0.2.3.9001</span>
      </span>

      <!--<div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">gradethis</a>
        <div class="info hidden-xs hidden-sm">
          <span class="partof">part of  <a href=""></a></span>
          <span class="version version-default" data-toggle="tooltip" data-placement="bottom" title="auto">0.2.3.9001</span>
        </div>
      </div>-->
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../articles/gradethis.html">Get started</a>
</li>
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="https://github.com/rstudio-education/gradethis">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Signal a failing grade if mistakes are detected in the submitted code</h1>
    <small class="dont-index">Source: <a href='https://github.com/rstudio-education/gradethis/blob/master/R/graded.R'><code>R/graded.R</code></a></small>
    <div class="hidden name"><code>fail_if_code_feedback.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>fail_if_code_feedback()</code> uses <code><a href='code_feedback.html'>code_feedback()</a></code> to detect if there are
differences between the user's submitted code and the solution code (if
available). If the exercise does not have an associated solution, or if there
are no detected differences between the user's and the solution code, no
grade is returned.</p>
<p>See <code><a href='graded.html'>graded()</a></code> for more information on <span class="pkg">gradethis</span> grade-signaling
functions.</p>
    </div>

    <pre class="usage"><span class='fu'>fail_if_code_feedback</span><span class='op'>(</span>
  message <span class='op'>=</span> <span class='cn'>NULL</span>,
  user_code <span class='op'>=</span> <span class='va'>.user_code</span>,
  solution_code <span class='op'>=</span> <span class='va'>.solution_code</span>,
  <span class='va'>...</span>,
  env <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sys.parent.html'>parent.frame</a></span><span class='op'>(</span><span class='op'>)</span>,
  hint <span class='op'>=</span> <span class='cn'>TRUE</span>,
  encourage <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/options.html'>getOption</a></span><span class='op'>(</span><span class='st'>"gradethis.fail.encourage"</span>, <span class='cn'>FALSE</span><span class='op'>)</span>,
  allow_partial_matching <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/options.html'>getOption</a></span><span class='op'>(</span><span class='st'>"gradethis.allow_partial_matching"</span>, <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>message</th>
      <td><p>A character string of the message to be displayed. In all
grading helper functions other than <code><a href='graded.html'>graded()</a></code>, <code>message</code> is a template
string that will be processed with <code><a href='https://glue.tidyverse.org/reference/glue.html'>glue::glue()</a></code>.</p></td>
    </tr>
    <tr>
      <th>user_code</th>
      <td><p>String containing user or solution code. For
ease of use in <code><a href='grade_this.html'>grade_this()</a></code>, <code>.user_code</code> or <code>.solution_code</code> are by
default retrieved from the calling environment.</p></td>
    </tr>
    <tr>
      <th>solution_code</th>
      <td><p>String containing user or solution code. For
ease of use in <code><a href='grade_this.html'>grade_this()</a></code>, <code>.user_code</code> or <code>.solution_code</code> are by
default retrieved from the calling environment.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Arguments passed on to <code><a href='graded.html'>graded</a></code></p><dl>
    <dt><code>correct</code></dt><dd><p>A logical value of whether or not the checked code is correct.</p></dd>
    <dt><code>type</code></dt><dd><p>The <code>type</code> and <code>location</code> of the feedback object
provided to <span class="pkg">learnr</span>. See
<a href='https://rstudio.github.io/learnr/exercises.html#Custom_checking'>https://rstudio.github.io/learnr/exercises.html#Custom_checking</a> for more
details.<code>type</code> may be one of "auto", "success", "info", "warning", "error", or
"custom".<code>location</code> may be one of "append", "prepend", or "replace".</p></dd>
    <dt><code>location</code></dt><dd><p>The <code>type</code> and <code>location</code> of the feedback object
provided to <span class="pkg">learnr</span>. See
<a href='https://rstudio.github.io/learnr/exercises.html#Custom_checking'>https://rstudio.github.io/learnr/exercises.html#Custom_checking</a> for more
details.<code>type</code> may be one of "auto", "success", "info", "warning", "error", or
"custom".<code>location</code> may be one of "append", "prepend", or "replace".</p></dd>
  
</dl></td>
    </tr>
    <tr>
      <th>env</th>
      <td><p>Environment used to standardise formals of the user and solution
code. Defaults to retrieving <code>.envir_prep</code> from the calling environment. If
not found, the <code><a href='https://rdrr.io/r/base/sys.parent.html'>parent.frame()</a></code> will be used.</p></td>
    </tr>
    <tr>
      <th>hint</th>
      <td><p>Include a code feedback hint with the failing message? This
argument only applies to <code><a href='graded.html'>fail()</a></code> and <code><a href='pass_if_equal.html'>fail_if_equal()</a></code> and the message is
added using the default options of <code><a href='code_feedback.html'>give_code_feedback()</a></code> and
<code><a href='code_feedback.html'>maybe_code_feedback()</a></code>. The default value of <code>hint</code> can be set using
<code><a href='gradethis_setup.html'>gradethis_setup()</a></code> or the <code>gradethis.fail.hint</code> option.</p></td>
    </tr>
    <tr>
      <th>encourage</th>
      <td><p>Incude a random encouraging phrase with
<code><a href='praise.html'>random_encouragement()</a></code>? The default value of <code>encourage</code> can be set
using <code><a href='gradethis_setup.html'>gradethis_setup()</a></code> or the <code>gradethis.fail.encourage</code> option.</p></td>
    </tr>
    <tr>
      <th>allow_partial_matching</th>
      <td><p>A logical. If <code>FALSE</code>, the partial matching of
argument names is not allowed and e.g. <code><a href='https://rdrr.io/r/stats/Uniform.html'>runif(1, mi = 0)</a></code> will return a
message indicating that the full formal name <code>min</code> should be used. The
default is set via the <code>gradethis.allow_partial_matching</code> option, or by
<code><a href='gradethis_setup.html'>gradethis_setup()</a></code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Signals an incorrect grade with feedback if there are differences
between the submitted user code and the solution code. If solution code is
not available, no grade is returned.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other grading helper functions: <code><a href='graded.html'>graded()</a></code>, <code><a href='graded.html'>pass()</a></code>, <code><a href='graded.html'>fail()</a></code>,
<code><a href='pass_if.html'>pass_if()</a></code>, <code><a href='pass_if.html'>fail_if()</a></code>, <code><a href='pass_if_equal.html'>pass_if_equal()</a></code>, <code><a href='pass_if_equal.html'>fail_if_equal()</a></code>.</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Suppose the exercise prompt is to generate 5 random numbers, sampled from</span>
<span class='co'># a uniform distribution between 0 and 1. In this exercise, you know that</span>
<span class='co'># you shouldn't have values outside of the range of 0 or 1, but you'll</span>
<span class='co'># otherwise need to check the submitted code to know that the student has</span>
<span class='co'># chosen the correct sampling function.</span>

<span class='va'>grader</span> <span class='op'>&lt;-</span>
<span class='co'># ```{r example-check}</span>
  <span class='fu'><a href='grade_this.html'>grade_this</a></span><span class='op'>(</span><span class='op'>{</span>
    <span class='fu'><a href='pass_if.html'>fail_if</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>.result</span><span class='op'>)</span> <span class='op'>!=</span> <span class='fl'>5</span>, <span class='st'>"I expected 5 numbers."</span><span class='op'>)</span>
    <span class='fu'><a href='pass_if.html'>fail_if</a></span><span class='op'>(</span>
      <span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='va'>.result</span> <span class='op'>&lt;</span> <span class='fl'>0</span> <span class='op'>|</span> <span class='va'>.result</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>, 
      <span class='st'>"I expected all numbers to be between 0 and 1."</span>
    <span class='op'>)</span>
    
    <span class='co'># Specific checks passed, but now we want to check the code.</span>
    <span class='fu'>fail_if_code_feedback</span><span class='op'>(</span><span class='op'>)</span>
    
    <span class='co'># All good!</span>
    <span class='fu'><a href='graded.html'>pass</a></span><span class='op'>(</span><span class='op'>)</span>
  <span class='op'>}</span><span class='op'>)</span>
<span class='co'># ```</span>

<span class='va'>.solution_code</span> <span class='op'>&lt;-</span> <span class='st'>"
# ```{r example-check}
  runif(5)
# ```
"</span>

<span class='co'># Not 5 numbers...</span>
<span class='fu'>grader</span><span class='op'>(</span><span class='fu'><a href='mock_this_exercise.html'>mock_this_exercise</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/Uniform.html'>runif</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>)</span>, <span class='op'>!</span><span class='op'>!</span><span class='va'>.solution_code</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; &lt;gradethis_graded: [Incorrect] I expected 5 numbers.&gt;</div><div class='input'>
<span class='co'># Not within [0, 1]...</span>
<span class='fu'>grader</span><span class='op'>(</span><span class='fu'><a href='mock_this_exercise.html'>mock_this_exercise</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='fl'>5</span><span class='op'>)</span>, <span class='op'>!</span><span class='op'>!</span><span class='va'>.solution_code</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; &lt;gradethis_graded: [Incorrect]
#&gt;   I expected all numbers to be between 0 and 1.
#&gt; &gt;</div><div class='input'>
<span class='co'># Passes specific checks, but hard to tell so check the code...</span>
<span class='fu'>grader</span><span class='op'>(</span><span class='fu'><a href='mock_this_exercise.html'>mock_this_exercise</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/Uniform.html'>runif</a></span><span class='op'>(</span><span class='fl'>5</span>, <span class='fl'>0.25</span>, <span class='fl'>0.75</span><span class='op'>)</span>, <span class='op'>!</span><span class='op'>!</span><span class='va'>.solution_code</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; &lt;gradethis_graded: [Incorrect]
#&gt;   In `runif(5, 0.25, 0.75)`, I expected `0` where you wrote `0.25`.
#&gt; &gt;</div><div class='input'><span class='fu'>grader</span><span class='op'>(</span><span class='fu'><a href='mock_this_exercise.html'>mock_this_exercise</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/Binomial.html'>rbinom</a></span><span class='op'>(</span><span class='fl'>5</span>, <span class='fl'>1</span>, <span class='fl'>0.5</span><span class='op'>)</span>, <span class='op'>!</span><span class='op'>!</span><span class='va'>.solution_code</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; &lt;gradethis_graded: [Incorrect]
#&gt;   I expected you to call `runif()` where you called `rbinom()`.
#&gt; &gt;</div><div class='input'>
<span class='co'># Perfect!</span>
<span class='fu'>grader</span><span class='op'>(</span><span class='fu'><a href='mock_this_exercise.html'>mock_this_exercise</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/Uniform.html'>runif</a></span><span class='op'>(</span>n <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span>, <span class='op'>!</span><span class='op'>!</span><span class='va'>.solution_code</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; &lt;gradethis_graded: [Correct] Beautiful! Correct!&gt;</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="tidyverse">
  <p>gradethis is built for <strong>R Markdown</strong>, an ecosystem of packages for creating computational documents in R. Learn more at <a href="https://rmarkdown.rstudio.com">rmarkdown.rstudio.com</a>.</p>
</div>

<div class="author">
  <p>
    Developed by Garrick Aden-Buie, Daniel Chen, Garrett Grolemund, Barret Schloerke,  RStudio, PBC.
    Site built with <a href="https://pkgdown.r-lib.org">pkgdown</a>.
  </p>
</div>

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: '6e6350018f3204fb7cb6f4e7d3487cce',
    indexName: 'rstudio-education',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  

  </body>
</html>


